<html><head><base href="."
/>
<title>theHunter Classic Mission Tool</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
	<link rel="icon" href="https://i.postimg.cc/ZR6VcL7f/Rg-YCfyr-F-1.png">
<style>
	body {
        font-family: 'Montserrat', sans-serif;
        background: linear-gradient(-45deg, #2D2D2D, #1a1a1a, #2D2D2D, #333333);
        background-size: 400% 400%;
        animation: gradientBG 60s ease infinite;
        color: #ecf0f1;
        margin: 0;
        padding: 20px;
	
    }
	  @keyframes gradientBG {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
	
		    .reserve-locations {
        font-size: .85em;
        color: #999;
        margin-top: 20px;
        font-style: italic;}
		
.mission-item.completed .reserve-locations
{
        font-size: .85em;
        color: #4a6e3b;
        margin-top: 20px;
        font-style: italic;}


.tab-header {
    display: flex;
    gap: 2px;
    background: none;
    padding: 0 20px;
    border-bottom: 4px solid transparent; /* Set border to transparent */
    position: sticky;
    top: 0;
    z-index: 100;
    justify-content: center; /* Center the tabs */
    width: 100%; /* Make header fill page width */
    box-sizing: border-box; /* Include padding in width calculation */
    position: relative; /* Needed for the pseudo-element */
}

.tab-header::after {
    content: '';
    position: absolute;
    bottom: 0; /* Align the glow with the border */
    left: 0;
    width: 100%;
    height: 4px; /* Match border height */
    background: linear-gradient(90deg, rgba(255, 87, 34, 0) 0%, rgba(255, 87, 34, 1) 50%, rgba(255, 87, 34, 0) 100%);
    animation: glow-pulse 3s infinite ease-in-out;
}

/* Smoother Glow Animation */
@keyframes glow-pulse {
       from {
        opacity: 0.8;
        text-shadow: 0 0 5px #FF8C00,
                     0 0 10px #FF8C00,
                     0 0 15px #FFD700;
    }
    to {
        opacity: 1;
        text-shadow: 0 0 10px #FF8C00,
                     0 0 20px #FF8C00,
                     0 0 30px #FFD700;
    }
}



    .tab {
        padding: 15px 40px;
        background: rgba(61, 61, 61, 0.7);
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 87, 34, 0.2);
        cursor: pointer;
        border-radius: 8px 8px 0 0;
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        color: #ecf0f1; 
		font-size: 16px;
    }

    .tab.active {
        background: linear-gradient(135deg, #FF5722, #FF8A65);
        box-shadow: 0 5px 15px rgba(255, 87, 34, 0.3);
        color: white; 
    }

    .tab:hover:not(.active) {
        transform: translateY(-2px);
        background: rgba(77, 77, 77, 0.8);
        box-shadow: 0 5px 15px rgba(255, 87, 34, 0.2);
    }

    .tab-content {
        display: none;
        padding: 20px;
    }

    .tab-content.active {
        display: block;
    }

    .mission-pack {
        background: rgba(61, 61, 61, .3);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 87, 34, 0.3);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        padding: 20px;
        margin: 20px auto;
        max-width: 1200px;
        border-radius: 10px;
		animation: gradientBG 30s ease infinite;
		
    }

    .animal-cards {
	
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center; /* Center the cards */
        max-width: 1200px;
        margin: 0 auto;
		
    }
    
    
    
    
    
    
    
.br {

  line-height:.6em;/* chrome for instance */
}
    
    
    
    
    
    
    
    
.animal-card2 {
    width: calc((100% - 80px) / 5); /* 80px accounts for 4 gaps between 5 cards */
    min-width: 200px;
    text-align: center;
    border: 1px solid #FF5722;
    min-height: 230px; /* Added to ensure consistent height with or without image */
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: linear-gradient(135deg, #4D4D4D,#202020); /* Gradient background */
    border-radius: 8px;
    padding: 15px;
    cursor: pointer;
    transition: transform 0.3s ease;
    box-sizing: border-box;
    position: relative;
	 animation: gradientBG 30s ease infinite;
}

.animal-card2:hover {
    transform: translateY(-5px);
    background: linear-gradient(135deg, rgba(93, 93, 93, 98.0), rgba(55, 55, 55, 98.0) ); /* Add transparency */
}


    .animal-card2.selected {
        box-shadow: 0 0 15px #FF5722;
        transform: translateY(-5px);
         background: linear-gradient(135deg, rgba(93, 93, 93, 90.1), rgba(55, 55, 55, 90.1) ); /* Add transparency */
        position: relative;
    }
    .animal-card2.selected::after {
        content: '';
        position: absolute;
        top: -3px;
        left: -3px;
        right: -3px;
        bottom: -3px;
        border-radius: 10px;
        background: transparent;
        border: 2px solid #FF5722;
        animation: glow 1.5s ease-in-out infinite alternate;
        z-index: -1;
    }
    
    
    
    
    
    
.animal-card {
    width: calc((100% - 80px) / 5); /* 80px accounts for 4 gaps between 5 cards */
    min-width: 200px;
    text-align: center;
    border: 1px solid #FF5722;
    min-height: 230px; /* Added to ensure consistent height with or without image */
    display: flex;
	font-weight: bold;
    flex-direction: column;
    justify-content: center;
    background: linear-gradient(135deg, #4D4D4D,#202020); /* Gradient background */
    border-radius: 8px;
    padding: 15px;
    cursor: pointer;
    transition: transform 0.3s ease;
    box-sizing: border-box;
    position: relative;
	 animation: gradientBG 30s ease infinite;
	  display: grid;
  grid-template-rows: auto auto; /* First row for thumbnail, second for text */
  justify-items: center; 
}


.animal-card:hover {
    transform: translateY(-5px);
    background: linear-gradient(135deg, rgba(93, 93, 93, 98.0), rgba(55, 55, 55, 98.0) ); /* Add transparency */
	 animation: gradientBG 30s ease infinite;
}


    .animal-card.selected {
        box-shadow: 0 0 15px #FF5722;
        transform: translateY(-5px);
         background: linear-gradient(135deg, rgba(93, 93, 93, 90.1), rgba(55, 55, 55, 90.1) ); /* Add transparency */
        position: relative;
    }

    .animal-card.selected::after {
        content: '';
        position: absolute;
        top: -3px;
        left: -3px;
        right: -3px;
        bottom: -3px;
        border-radius: 10px;
        background: transparent;
        border: 2px solid #FF5722;
        animation: glow 1.5s ease-in-out infinite alternate;
        z-index: -1;
    }

    @keyframes glow {
        from {
            box-shadow: 0 0 5px #FF5722, 
                        0 0 10px #FF5722,
                        0 0 15px #FF5722;
        }
        to {
            box-shadow: 0 0 10px #FF5722,
                        0 0 20px #FF5722,
                        0 0 30px #FF5722;
        }
    }

    .mission-item.lowest-reward .gm-reward {
    background: linear-gradient(45deg, #FF8C00, #FFD700);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: rewardGlow 1.5s ease-in-out infinite alternate;
    font-weight: bold;
    position: relative;
    z-index: 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Add new style for highlighting lowest unchecked mission */
.mission-item.lowest-reward {
    box-shadow: 0 0 15px #FF5722;
    position: relative;
    background: linear-gradient(135deg, rgba(207, 116, 56, 0.3), rgba(107, 71, 54, 0.2));
}
.mission-item.lowest-reward:hover {
    box-shadow: 0 0 15px #FF5722;
    position: relative;
    background: linear-gradient(135deg, rgba(207, 116, 56, 0.15), rgba(107, 71, 54, 0.15));
}
.mission-item.lowest-reward::before {
    box-shadow: 0 0 10px #FF5722;
}

.mission-item.lowest-reward::after {
    content: '';
    position: absolute;
    top: -3px;
    left: -3px;
    right: -3px;
    bottom: -3px;
    border-radius: 10px;
    background: transparent;
    border: 2px solid #FF5722;
    animation: glow 1.5s ease-in-out infinite alternate;
    z-index: -1;
}

/* Add keyframes for the rewardGlow animation */


    .animal-thumbnail {
    width: 150px;
    height: 150px;
    object-fit: cover;
    border-radius: 8px;
    display: block;
    margin: 0 auto;
    }

    .mission-list {
        display: none;
        margin-top: 20px;
        background: #2D2D2D;
        border-radius: 8px;
        padding: 20px;
        border: 1px solid #FF5722;
        counter-reset: mission-counter;
    }
	
	.mission-header {
    display: flex;
    align-items: left; /* Align items vertically centered */
	justify-content: flex-start;
}


    .mission-item {
        position: relative;
        padding: 15px 15px 15px 60px; /* Increase left padding to make more room for numbers */
        background: #3D3D3D;
        margin: 10px 0;
        border-radius: 5px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-left: 3px solid #FF5722;
         
        cursor: pointer; /* Add cursor pointer to mission items to indicate clickability */
    }

    .mission-item::before {
        content: counter(mission-counter);
        counter-increment: mission-counter;
        position: absolute;
        left: 20px; /* Adjust left position */
        top: 50%;
        transform: translateY(-50%);
        color: #FF5722;
        font-weight: bold;
        background: #2D2D2D;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #FF5722;
    }

    .mission-item:hover {
        background: #4D4D4D;
    }

   @keyframes greenGlow {
    from {
        text-shadow: 0 0 5px #4CAF50, 
                    0 0 10px #4CAF50, 
                    0 0 15px #4CAF50;
    }
    to {
        text-shadow: 0 0 10px #4CAF50, 
                    0 0 20px #4CAF50, 
                    0 0 30px #4CAF50;
    }
}

.mission-item.completed .gm-reward {
    background: linear-gradient(45deg, #66BB6A, #A5D6A7);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: greenGlow 1.5s ease-in-out infinite alternate;
    font-weight: bold;
    position: relative;
    z-index: 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Add new style for highlighting completed mission */
.mission-item.completed {
    box-shadow: 0 0 15px #4CAF50;
    position: relative;
    background: linear-gradient(135deg, rgba(76, 175, 80, 0.3), rgba(102, 187, 106, 0.2));
}

.mission-item.completed::before {
    box-shadow: 0 0 10px #4CAF50;
}

.mission-item.completed::after {
    content: '';
    position: absolute;
    top: -3px;
    left: -3px;
    right: -3px;
    bottom: -3px;
    border-radius: 10px;
    background: transparent;
	 border: 2px solid #4CAF50;
    animation: greenGlow 1.5s ease-in-out infinite alternate;
    z-index: -1;
}


    .mission-item.completed .mission-objectives {
        text-decoration: line-through;
        color: #4a6e3b;
    }

	

    .gm-reward {
        color: #FF5722;
        font-weight: bold;
        min-width: 100px;
        text-align: center;
		
    }

    .status {
        min-width: 120px;
        text-align: center; /* Changed from right to center */
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .checkbox-wrapper {
        display: inline-block;
    }

    .mission-checkbox {
        width: 24px; /* Increased from 20px */
        height: 24px; /* Increased from 20px */
        cursor: pointer;
        appearance: none;
        -webkit-appearance: none;
        background-color: #3D3D3D;
        border: 2px solid #FF5722;
        border-radius: 4px;
        outline: none;
        position: relative;
        transition: all 0.3s ease;
        pointer-events: none; /* Prevent checkbox from receiving double-clicks */
        margin: 0; /* Remove default margins */
    }

    .mission-checkbox:checked {
        background-color: #4a6e3b;
		border: 2px solid #4CAF50;
    }

    .mission-checkbox:checked::before {
        content: '✓';
        position: absolute;
        color: #fff;
        font-size: 16px; /* Increased from 14px */
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .mission-checkbox:hover {
        background-color: #4D4D4D;
    }

    .mission-checkbox:checked:hover {
        background-color: #FF7043;
    }

    .mission-objectives {
        flex: 1;
        margin-right: 20px;
        padding-left: 5px; /* Add some padding to prevent text from getting too close to number */
        line-height: 1.5;
		font-size: 1.2em;
}



    h3 {
        color: #d1d1d1;
		font-weight: bold;
		 text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
		 word-wrap: break-word;
    }

    .list-header {
        display: flex;
        justify-content: space-between;
        padding: 0 15px;
        margin-bottom: 10px;
        color: #FF5722;
        font-weight: bold;
        border-bottom: 2px solid #FF5722;
    }

    .header-objectives {
        flex: 1;
        margin-right: 20px;
		
    }

    .header-reward {
        min-width: 100px;
        text-align: center;
    }

    .header-status {
        min-width: 120px;
        text-align: center; /* Changed from right to center */
    }

    .animal-card:hover .animal-thumbnail {
        transform: scale(1.05);
        transition: transform 0.3s ease;
    }

    .animal-card p {
        margin: 5px 0;
        font-size: 0.9em;
        text-align: left;
    }

    .animal-card p:first-of-type {
        color: #FF5722;
        font-weight: bold;
        margin-top: 10px;
    }
	
	 .animal-card2:hover .animal-thumbnail {
        transform: scale(1.05);
        transition: transform 0.3s ease;
    }

    .animal-card2 p {
        margin: 5px 0;
        font-size: 0.9em;
        text-align: left;
    }

    .animal-card2 p:first-of-type {
        color: #FF5722;
        font-weight: bold;
        margin-top: 10px;
    }

	
.mission-pack-name {
    flex-grow: 1; /* Mission name will take the remaining space */
	flex-shrink: 0; 
	margin-top: 30px;
	

}
    

	
.mission-item.completed .mission-pack-name {
    color: #4a6e3b; 
    font-weight: bold; 
    font-size: 0.9em;
    padding: 5px 0 ;
    margin-bottom: 5px ;
		font-weight: bold;
		 text-shadow: none;
		 word-wrap: break-word;
    
}


	

    /* Add this CSS for the mission pack name header */
    .mission-item .mission-pack-name {
        color: #FF5722;
        font-weight: bold;
        font-size: 0.9em;
        padding: 0;
		  color: #d1d1d1;
		font-weight: bold;
		 text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
		 word-wrap: break-word;
      
		

    }
	  .mission-item .mission-name {
        color: #FF5722;
        font-weight: bold;
        font-size: 0.9em;
        padding: 5px 0;
        margin-bottom: 5px;
        border-bottom: 1px solid #FF5722;
		border-top: 1px solid #FF5722;
		
		}
    .mission-item.completed .mission-name {
    color: #4a6e3b; 
    font-weight: bold; 
    font-size: 0.9em;
    padding: 5px 0 ;
    margin-bottom: 5px ;
	border-bottom: 1px solid #4a6e3b;
	border-top: 1px solid #4a6e3b;
	
    
}





    /* Add this CSS for the return to top button */
    .return-to-top {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px 20px;
        background: #3D3D3D;
        border: 2px solid #FF5722;
        border-radius: 8px;
        color: #FF5722;
        cursor: pointer;
        margin: 10px 0;
        transition: all 0.3s ease;
        font-weight: bold;
    }

    .return-to-top:hover {
        background: #4D4D4D;
        transform: translateY(-2px);
        box-shadow: 0 0 10px rgba(255, 87, 34, 0.3);
    }

    .return-to-top svg {
        width: 20px;
        height: 20px;
        margin-right: 8px;
        fill: currentColor;
    }
    .mission-counter, .reward-counter {
        font-size: 0.9em;
        color: #FF5722;
        font-weight: 600;
        padding: 5px 10px;
        background: rgba(255, 87, 34, 0.1);
        border-radius: 4px;
        display: inline-block;

  color: #F4511E; 



}	



    .mission-counter {
        font-size: 0.9em; /* Increased from 0.8em */
        color: #FF5722; /* Changed from default color to match theme */
        margin-top: 10px; /* Increased from 5px */
        font-weight: 600; /* Added bold weight */
        padding: 5px 10px; /* Added padding */
        background: rgba(255, 87, 34, 0.1); /* Added subtle background */
        border-radius: 4px; /* Added rounded corners */
        display: inline-block; /* Makes the background wrap the text nicely */

    }

    .mission-stats {
        display: flex;
        flex-direction: column;
        gap: 5px;
        margin-top: 10px;
    }



    

    /* Add this CSS for the textarea */
    .data-paste {
        width: 50%;
        height: 275px;
        background: #3D3D3D;
        border: 2px solid #FF5722;
        border-radius: 8px;
        color: #ecf0f1;
        padding: 15px;
        font-family: monospace;
        margin-top: 20px;
        resize: both;
		
    }

    /* Add styles for the load button */
    .load-button {
        display: block;
        width: 200px;
        padding: 15px 30px;
        background: #FF5722;
        color: white;
        border: none;
        border-radius: 8px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        cursor: pointer;
        margin: 20px 0;
        transition: all 0.3s ease;
    }

    .load-button:hover {
        background: #F4511E;
        transform: translateY(-2px);
        box-shadow: 0 2px 8px rgba(255, 87, 34, 0.4);
    }

    .load-button:disabled {
        background: #999;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
    }



    .animal-card:hover .animal-thumbnail svg {
        transform: scale(1.05);
        transition: transform 0.3s ease;
    }

    .animal-card:hover .animal-thumbnail svg path {
        opacity: 0.2;
        transition: opacity 0.3s ease;
    }

    .animal-card:hover .animal-thumbnail svg circle {
        stroke-width: 3;
        transition: stroke-width 0.3s ease;
    }
	
 .animal-card2:hover .animal-thumbnail svg {
        transform: scale(1.05);
        transition: transform 0.3s ease;
    }

    .animal-card2:hover .animal-thumbnail svg path {
        opacity: 0.2;
        transition: opacity 0.3s ease;
    }

    .animal-card2:hover .animal-thumbnail svg circle {
        stroke-width: 3;
        transition: stroke-width 0.3s ease;
    }









/* Search Bar Styles */
/* Wrapper container */
#mission-search-container {
    position: relative; /* Enables positioning pseudo-elements */
    width: 100%; /* Full-width container for the search input */
}

/* Input field styling */
#mission-search {
    width: 100%;
    padding: 10px 16px 10px 40px; /* Space for the blinking caret */
    font-size: 16px;
    border: 2px solid #333; /* Charcoal grey border */
    border-radius: 24px; /* Rounded corners */
    background-color: #222; /* Dark grey background */
    color: #fff; /* White text */
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    caret-color: #ff6600; /* Orange caret */
    box-sizing: border-box;
	
	
}

/* Placeholder styling */
#mission-search::placeholder {
    color: rgba(99, 99, 99, 0.9); /* Orange with slight transparency */
    font-style: italic;
}

/* Glowing effect when focused */
#mission-search:focus {
    border-color: #ff6600;
    box-shadow: 0 0 8px #ff6600, 0 0 15px #ff6600; /* Glowing effect */
    outline: none;
}

/* Pseudo-caret for blinking effect */
#mission-search-container::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 16px; /* Position the caret within the input */
    transform: translateY(-50%);
    width: 2px;
    height: 1.5em;
    background-color: #ff6600; /* Orange color */
    animation: cursorBlink 1s steps(2, start) infinite;
    pointer-events: none; /* Prevent interaction issues */
}

/* Hide the pseudo-caret when the input is focused */
#mission-search:focus ~ #mission-search-container::before {
    display: none;
}

/* Blinking cursor animation */
@keyframes cursorBlink {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0;
    }
}



/* Button Styling (to replace the topReturnButton with the search bar) */
.return-to-top {
    background-color: #ff6600; /* Orange background */
    color: #fff;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease;
}

.return-to-top:hover {
    background-color: #e65c00; /* Darker orange on hover */
}

.return-to-top svg {
    margin-right: 8px;
    fill: #fff;
}





/* Style for the mission thumbnail wrapper */
.mission-thumbnail-wrapper {
margin-right: 10px;
margin-bottom: 20px;
	
		
}

	.mission-item.completed .mission-thumbnail-wrapper img	 {
 border: 2.5px solid transparent #4caf50;
    animation: glow3 1.3s ease-in-out infinite alternate;
}
				
 .mission-item.lowest-reward .mission-thumbnail-wrapper img  {
 
 border: 10px solid transparent #fcba03;
    animation: glow2 1.3s ease-in-out infinite alternate;
	
 
 }



.mission-thumbnail-wrapper img {

    width: 100%;
	max-height: 75px;
    max-width: 75px; /* Ensure the image doesn’t exceed a set size */
    border: 4px solid #333; /* Frame around the thumbnail */
    border-radius: 4px;
    display: block;
    margin-left: 0; /* Ensure no margin for left alignment */
}
     .glowing-gif {
            border: 5px solid transparent; /* Optional border */
            border-radius: 10px; /* Makes the corners rounded */
            box-shadow: 0 0 5px #FF5722, 
                        0 0 10px #FF5722,
                        0 0 15px #FF5722;
			

            display: block; /* Ensures the GIF behaves like a block */
            margin left: 0px auto; /* Centers the GIF */
        }
		
		

     @keyframes glow3 {
        from {
			opacity: .1;
            box-shadow: 0 0 10px  #4caf50, 
                        0 0 20px #49783d,
                        0 0 30px #49783d;
        }
		 to {
        opacity: .1;
        text-shadow:    0 0 10px  #4caf50, 
                        0 0 20px #49783d,
                        0 0 30px #49783d;
			}
		

    }
 
 
 @keyframes rewardGlow {
    from {
        opacity: 0.8;
        text-shadow: 0 0 5px #FF8C00,
                     0 0 10px #FF8C00,
                     0 0 15px #FFD700;
    }
    to {
        opacity: 1;
        text-shadow: 0 0 10px #FF8C00,
                     0 0 20px #FF8C00,
                     0 0 30px #FFD700;
    }
}
    @keyframes glow2 {
        from {
			opacity: 1;
            box-shadow: 0 0 10px  #e69c1e, 
                        0 0 20px #ffae21,
                        0 0 30px #ffae21;
        }
		to {
        opacity: .9;
        text-shadow: 0 0 10px  #e69c1e, 
                     0 0 20px #ffae21,
                     0 0 30px #ffae21;
    }

  }
	
/* Add styles for search container */
.search-container2 {
    padding: 20px;
    margin: 0 auto;
    max-width: 1000px;
    position: relative;
    border-radius: 24px; /* Rounded corners */
    background-color: #222; /* Dark grey background */
    color: #fff; /* White text */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    box-sizing: border-box;
	border: 2px solid #ff6600; /* Orange border */
}

/* Improved search input */
.search-input2 {
    width: 100%;
    padding: 12px 20px;
    border: 2px solid transparent;
    border-radius: 24px; /* Rounded corners */
    background-color: #333; /* Slightly lighter grey background */
    color: #fff; /* White text */
    font-family: 'Montserrat', sans-serif;
    font-size: 16px;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    caret-color: #ff6600; /* Orange caret */
    box-sizing: border-box;
}

/* Add focus styles for input */
.search-input2:focus {
    outline: none;
    border-color: #ff6600; /* Orange border on focus */
    box-shadow: 0 0 8px rgba(255, 102, 0, 0.5); /* Subtle glowing effect */
    background-color: #444; /* Slightly darker background on focus */
}

/* Style for the dropdown list container */
.search-result2s2 {
    position: absolute;
     top: calc(100% - 20px);
    left: 0;
    right: 0;
    background: #333; /* Match background with input */
    border: 2px solid #ff6600; /* Orange border */
    border-top: none; /* Remove top border for seamless look */
    border-radius: 0 0 24px 24px; /* Rounded bottom corners */
    max-height: 200px;
    overflow-y: auto;
    display: none; /* Hidden by default */
    z-index: 1000;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    animation: fadeIn 0.3s ease;
	
}

/* Show dropdown list when it's not empty */
.search-result2s2:not(:empty) {
    display: block; /* Show dropdown when it has content */
}

/* Add style for individual results */
.search-result2 {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    cursor: pointer;
    color: #fff;
    transition: background-color 0.3s ease, color 0.3s ease;
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
}

/* Add hover and selected styles for individual results */
.search-result2:hover,
.search-result2.selected {
    background-color: #444; /* Slightly darker background on hover */
    color: #ff6600; /* Orange text */
}

/* Style for icons/images in results */
.search-result2 img {
    width: 36px;
    height: 36px;
    object-fit: cover;
    border-radius: 50%; /* Circular icons for modern look */
}

/* Add a fade-in animation */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

    .mission-objectives .hint-button {

	

        background: none;

	

        border: none;

	

        color: #FF5722;

	

        cursor: pointer;

	

        font-size: 1em;

	

        margin-left: 10px;

	

        padding: 0;

	

        display: inline-flex;

	

        align-items: center;

	

    }

	

	

    .mission-objectives .hint-button svg {

	

        width: 16px;

	

        height: 16px;

	

        fill: #FF5722;

	

    }

	

	

    .mission-hint {

	

        display: none;

	

        background: #4D4D4D;

	

        border-radius: 5px;

	

        padding: 10px;

	

        color: #ecf0f1;

	

        font-size: 0.9em;

	

        margin-top: 5px;

	

    }

	

	

    .mission-hint.active {

	

        display: block;

	

        animation: fadeIn 0.3s ease-in-out;

	

    }

	

	

    @keyframes fadeIn {

	

        from { opacity: 0; }

	

        to { opacity: 1; }

	

    }

	

	

    .mission-objectives .mission-name-header {

	

        color: #FF5722;

	

        font-weight: bold;

	

        margin-bottom: 5px; 

</style>
</head>
<body>
<div class="tab-header">
    <button class="tab" onclick="openTab('paste-data')">Paste Your Data</button>
    <button class="tab active" onclick="openTab('mission-manager')">Mission Packs</button>
    <button class="tab" onclick="openTab('mission-filters')">Mission Filters</button>
</div>

<div id="paste-data" class="tab-content">
  <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
  <h3 style="text-align: center;">Paste Your Mission Data</h3>
  <img class="glowing-gif" src="https://i.postimg.cc/L5q0Dhv6/ezgif-com-added-text.gif" alt="How to paste" style="width: auto; height: auto;">
  <p style="margin: 10px 0; color: #ff6600;">*Works with launcher too.<br><br><br><br></p>

	
  Paste your mission data here to import your progress:<br>
  <textarea class="data-paste" placeholder="Paste your mission data here..." style="margin-top: 10px; width: 1000px; height: 300px;"></textarea>
  <button class="load-button" onclick="loadMissionData()" style="margin-top: 10px;">Load Missions</button>
</div>

</div>


		<div id="mission-manager" 
		class="tab-content active">
		
		    <div class="search-container2">
        <input type="text" class="search-input2" placeholder="Search mission packs...">
        <div class="search-result2s2"></div>
    </div>
		
		
		
		<div class="mission-pack">
        <div class="animal-cards">
		
		<div class="animal-card" onclick="toggleMissions('advanced-firearms-missions')">
		   
                <img src="https://i.postimg.cc/vTDvyj6P/iSr91k-F.jpg" 
				alt="Advanced Firearms" 
				title="Advanced Firearms" 
				class="animal-thumbnail">
                <h3>Advanced Firearms Missions</h3>
            </div>
	
			<div class="animal-card" onclick="toggleMissions('aimpoint-missions')">
                <img src="https://i.postimg.cc/fbwfQ0KL/tenpoint.png"
				alt="Advanced Firearms" 
				title="Advanced Firearms" 
				class="animal-thumbnail">
                <h3>Aimpoint Missions</h3>
            </div>

           
        </div>
		
	<div id="advanced-firearms-missions" class="mission-list">
    <div class="list-header">
        <div class="header-objectives">Objectives</div>
        <div class="header-reward">Reward</div>
        <div class="header-status">Status</div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Advanced Firearms Missions</div>
            <div class="mission-name">Advanced Firearms: Logger's Point</div>
            Harvest a female Cottontail Rabbit.


            <div class="reserve-locations">Reserve: Loggers Point</div>
        </div>
        <div class="gm-reward">750gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Advanced Firearms Missions</div>
            <div class="mission-name">Advanced Firearms: Rougarou Bayou</div>
            Harvest an airborne Mallard Duck.
            <div class="reserve-locations">Reserve: Rougarou Bayou</div>
        </div>
        <div class="gm-reward">1000gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Advanced Firearms Missions</div>
            <div class="mission-name">Advanced Firearms: Redfeather Falls</div>
            Harvest a male Blacktail Deer 

            <div class="reserve-locations">Reserve: Redfeather Falls</div>
        </div>
        <div class="gm-reward">1500gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Advanced Firearms Missions</div>
            <div class="mission-name">Advanced Firearms: Settler Creeks</div>
            Harvest a male 12-point Roosevelt Elk in Settler Creeks

            <div class="reserve-locations">Reserve: Settler Creeks</div>
        </div>
        <div class="gm-reward">2000gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Advanced Firearms Missions</div>
            <div class="mission-name">Advanced Firearms: Hirschfelden</div>
            Harvest a male Chocolate Fallow Deer.
            <div class="reserve-locations">Reserve: Hirschfelden</div>
        </div>
        <div class="gm-reward">2250</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Advanced Firearms Missions</div>
            <div class="mission-name">Advanced Firearms: Hemmeldal</div>
            Harvest a Grey coloured Eurasian Lynx in Hemmeldal.

            <div class="reserve-locations">Reserve: Hemmeldal</div>
        </div>
        <div class="gm-reward">2500gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
</div>	
		
<div id="aimpoint-missions" class="mission-list">
    <div class="list-header">
        <div class="header-objectives">Objectives</div>
        <div class="header-reward">Reward</div>
        <div class="header-status">Status</div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Aimpoint Missions</div>
            <div class="mission-name">Keep Your Eye Open</div>
            Harvest a Whitetail Deer.
            <div class="reserve-locations">Reserve: Redfeather Falls</div>
        </div>
        <div class="gm-reward">100gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Aimpoint Missions</div>
            <div class="mission-name">Under Extreme Circumstances</div>
            Harvest a Feral Hog.


            <div class="reserve-locations">Reserve: Rougarou Bayou, Hemmeldal</div>
        </div>
        <div class="gm-reward">250gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Aimpoint Missions</div>
            <div class="mission-name">Timing A Shot</div>
            Harvest a moving Red Fox.

            <div class="reserve-locations">Reserve: Hirschfelden, Hemmeldal, Val-Des-Boi, Bushrangers Run</div>
        </div>
        <div class="gm-reward">500gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Aimpoint Missions</div>
            <div class="mission-name">From Eyes To Trigger</div>
            Harvest a spooked Roe Deer.


            <div class="reserve-locations">Reserve: Hirschfelden, Hemmeldal, Val-Des-Boi</div>
        </div>
        <div class="gm-reward">1250gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
    <div class="mission-item">
        <div class="mission-objectives">
            <div class="mission-pack-name">Aimpoint Missions</div>
            <div class="mission-name">The Heart Of The Matter</div>
            Harvest a Wild Boar with a shot through the heart.

            <div class="reserve-locations">Reserve: Hirschfelden</div>
        </div>
        <div class="gm-reward">2900gm$</div>
        <div class="status">
            <input type="checkbox" class="mission-checkbox" onchange="toggleComplete(this)">
        </div>
    </div>
</div>

		
    </div>
</div>

<div id="mission-filters" class="tab-content">
   
    <div class="mission-pack">
        <div class="animal-cards">
       
		    
             	<div class="animal-card2" onclick="toggleFilteredMissions('best-available-missions')">
                <img src="https://i.postimg.cc/1tY6Q1Nf/my-image-2.png"  alt="Highest gm$ Reward" title="Best Mission Avaliable" class="animal-thumbnail" style="margin-top: 30px;">
                <h3>Best Mission Available</h3>
       		</div>
            
            <div class="animal-card2" onclick="toggleFilteredMissions('whitehart-missions')">
                <img src="https://static.wikia.nocookie.net/thehuntergame/images/a/a5/Whitehart_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
                <h3>Whitehart Island</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('loggers-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/0/04/Lp_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
                <h3>Loggers Point</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('settler-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/0/08/Settler_Creeks_EW_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Settler Creeks</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('redfeather-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/b/bc/RFF_icon2.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Redfeather Falls</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('hirschfelden-missions')">
                <img src="https://static.wikia.nocookie.net/thehuntergame/images/f/f0/Hirschfelden_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
                <h3>Hirschfelden</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('hemmeldal-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/f/ff/Hemmeldal_Icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Hemmeldal</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('rougarou-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/c/c9/Rougarou_Icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
                <h3>Rougarou Bayou</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('val-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/6/66/Val-des-bois_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Val-des-Bois</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('bushrangers-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/2/22/Bushrangers_run_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Bushrangers Run</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('whiterime-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/5/55/WR_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Whiterime Ridge</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('timbergold-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/c/ce/TT_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Timbergold Trails</h3>
            </div>
            <div class="animal-card2" onclick="toggleFilteredMissions('piccabeen-missions')">
              <img src="https://static.wikia.nocookie.net/thehuntergame/images/c/c3/PB_icon.png" alt="Hirschfelden" title="Hirschfelden" class="animal-thumbnail">
              
                <h3>Piccabeen Bay</h3>
            </div>
		
		
		
		
		
        </div>


        <!-- Add mission lists for each reserve -->
        <div id="whitehart-missions" class="mission-list"></div>
        <div id="loggers-missions" class="mission-list"></div>
        <div id="settler-missions" class="mission-list"></div>
        <div id="redfeather-missions" class="mission-list"></div>
        <div id="hirschfelden-missions" class="mission-list"></div>
        <div id="hemmeldal-missions" class="mission-list"></div>
        <div id="rougarou-missions" class="mission-list"></div>
        <div id="val-missions" class="mission-list"></div>
        <div id="bushrangers-missions" class="mission-list"></div>
        <div id="whiterime-missions" class="mission-list"></div>
        <div id="timbergold-missions" class="mission-list"></div>
        <div id="piccabeen-missions" class="mission-list"></div>
        <div id="best-available-missions" class="mission-list"></div>
   


   </div>
	

</div>



<script>







document.querySelectorAll('.mission-objectives').forEach(function (element) {
    element.innerHTML = element.innerHTML
        .replace(/([a-zA-Z0-9])\.\s*(?=[A-Z])/g, '$1.<br><br>')  // Handle regular sentence endings
        .replace(/(\))\.\s*(?=[A-Z])/g, '$1.<br><br>');           // Handle sentences ending with " ). "
});






function toggleMissions(missionId) {
    const missionList = document.getElementById(missionId);
    if (!missionList) {
        console.error(`Mission list with id ${missionId} not found`);
        return;
    }

    const isCurrentlyVisible = missionList.style.display === "block";

    // Remove selected class from all cards
    const allCards = document.querySelectorAll('.animal-card');
    allCards.forEach(card => card.classList.remove('selected'));

    // Hide all mission lists and remove existing return buttons 
    const allMissionLists = document.querySelectorAll('.mission-list');
    allMissionLists.forEach(list => {
        list.style.display = "none";
        // Remove any existing return buttons
        list.querySelectorAll('.return-to-top').forEach(btn => btn.remove());
    });

    if (!isCurrentlyVisible) {
        // Add selected class to clicked card
        const clickedCard = event.currentTarget;
        clickedCard.classList.add('selected');

        // Show the mission list
        missionList.style.display = "block";

        // Add top return button (only once)
        const topReturnButton = document.createElement('div');
        topReturnButton.className = 'return-to-top';
        topReturnButton.innerHTML = `
            <svg viewBox="0 0 24 24">
                <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
            </svg>
            Return to Selected Mission Pack
        `;
        topReturnButton.onclick = returnToSelected;
        missionList.insertBefore(topReturnButton, missionList.firstChild);

        // Add bottom return button (only once)
        const bottomReturnButton = topReturnButton.cloneNode(true);
        bottomReturnButton.onclick = returnToSelected;
        missionList.appendChild(bottomReturnButton);

        // Rest of your existing code...
        missionList.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });

        highlightLowestRewardMissions(missionList);
    }
}

function returnToSelected() {
    const selectedCard = document.querySelector('.animal-card.selected, .animal-card2.selected');
    if (selectedCard) {
        selectedCard.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
        });
    }
}

function updateBestAvailableMissions(missionList) {
    // Get all uncompleted missions from each pack
    let bestMissions = [];
    const missionPacks = [
'advanced-firearms-missions',
'aimpoint-missions'

    ];
    
    missionPacks.forEach(packId => {
        const pack = document.getElementById(packId);
        if (pack) {
            const uncompletedMissions = Array.from(pack.querySelectorAll('.mission-item:not(.completed)'));
            if (uncompletedMissions.length > 0) {
                uncompletedMissions.sort((a, b) => {
                    const rewardA = parseInt(a.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));
                    const rewardB = parseInt(b.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));
                    return rewardA - rewardB;
                });
                bestMissions.push(uncompletedMissions[0]);
            }
        }
    });

    // Sort by reward value (highest to lowest)
    bestMissions.sort((a, b) => {
        const rewardA = parseInt(a.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));
        const rewardB = parseInt(b.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));
        return rewardB - rewardA;
    });

    // Clear existing missions except header
    missionList.innerHTML = '';

    // Add top return button
    const topReturnButton = document.createElement('div');
    topReturnButton.className = 'return-to-top';
    topReturnButton.innerHTML = `
        <svg viewBox="0 0 24 24">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
        Return to Selected Filter
    `;
    topReturnButton.onclick = function() {
        const selectedCard = document.querySelector('.animal-card2.selected');
        if (selectedCard) {
            selectedCard.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    };
    missionList.appendChild(topReturnButton);

    // Add search bar
    const searchBarContainer = document.createElement('div');
    searchBarContainer.className = 'search-bar-container';
    const searchBar = document.createElement('input');
    searchBar.type = 'text';
    searchBar.id = 'mission-search';
    searchBar.className = 'search-bar';
    searchBar.placeholder = "Search missions or type 'best' to see best available...";
    searchBarContainer.appendChild(searchBar);
    missionList.appendChild(searchBarContainer);
	setTimeout(() => searchBar.focus(), 0);

  

    // Add list header
    const header = document.createElement('div');
    header.className = 'list-header';
    header.innerHTML = `
        <div class="header-objectives">Objectives</div>
        <div class="header-reward">Reward</div>
        <div class="header-status">Status</div>
    `;
    missionList.appendChild(header);

    // Add sorted missions
    bestMissions.forEach(mission => {
        const clone = mission.cloneNode(true);
          // Find the original mission's position within its pack
        const packMissions = Array.from(mission.closest('.mission-list').querySelectorAll('.mission-item'));
        const originalPosition = packMissions.indexOf(mission);
        
        // Set counter-reset to match original mission number
        clone.style.counterReset = `mission-counter ${originalPosition}`;
        
        const originalCheckbox = mission.querySelector('.mission-checkbox');
        const clonedCheckbox = clone.querySelector('.mission-checkbox');
        clonedCheckbox.checked = originalCheckbox.checked;
        
        // Add click handler to sync both checkboxes
        clone.addEventListener('click', function(e) {
            if (!e.target.classList.contains('mission-checkbox')) {
                originalCheckbox.closest('.mission-item').click();
                clonedCheckbox.checked = originalCheckbox.checked;
				
                clone.classList.toggle('completed', clonedCheckbox.checked);
				
                // Prevent the mission list from collapsing by forcing it to stay displayed
                missionList.style.display = "block";
            }
        });
        
        missionList.appendChild(clone);
		
		
		
		
		
		
		
		
		
		
		
		
		
		
    });

    // Add bottom return button
    const bottomReturnButton = document.createElement('div');
    bottomReturnButton.className = 'return-to-top';
    bottomReturnButton.innerHTML = `
        <svg viewBox="0 0 24 24">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
        Return to Selected Filter
    `;
    bottomReturnButton.onclick = function() {
        const selectedCard = document.querySelector('.animal-card2.selected');
        if (selectedCard) {
            selectedCard.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    };
    missionList.appendChild(bottomReturnButton);

    // Setup search functionality for the new search bar
    const newSearchBar = missionList.querySelector('#mission-search');
    if (newSearchBar) {
        newSearchBar.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const missionItems = missionList.querySelectorAll('.mission-item');
            missionItems.forEach(mission => {
                const objectives = mission.querySelector('.mission-objectives').textContent.toLowerCase();
                const reserveElem = mission.querySelector('.reserve-locations');
                const reserve = reserveElem ? reserveElem.textContent.toLowerCase() : '';
                const reward = mission.querySelector('.gm-reward').textContent.toLowerCase();

                if (objectives.includes(searchTerm) || 
                    reserve.includes(searchTerm) || 
                    reward.includes(searchTerm)) {
                    mission.style.display = '';
                } else {
                    mission.style.display = 'none';
                }
            });
        });
    }
	
	
	
}

function toggleFilteredMissions(reserveId, keepSearch = false) {
    const missionList = document.getElementById(reserveId);
    
    if (!missionList) {
        console.error(`Mission list with id ${reserveId} not found`);
        return;
    }
    
    const isCurrentlyVisible = missionList.style.display === "block";
    
    // Remove selected class from all cards
    const allCards = document.querySelectorAll('#mission-filters .animal-card2');
    allCards.forEach(card => card.classList.remove('selected'));
    
    // Hide all mission lists
    const allMissionLists = document.querySelectorAll('#mission-filters .mission-list');
    allMissionLists.forEach(list => list.style.display = "none");
    
    if (!isCurrentlyVisible || !keepSearch) {
        // Only clear search if we're clicking a new card and not keeping search
        if (!keepSearch && event?.type === 'click') { 
            clearSearchTerm();
        }
        
        // Add selected class to clicked card  
        const clickedCard = event?.currentTarget;
        if (clickedCard) {
            clickedCard.classList.add('selected');
        }
        
        if (reserveId === 'best-available-missions') {
            updateBestAvailableMissions(missionList);
            missionList.style.display = "block";
            missionList.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
            return;
        }
        
        // Clear existing missions BEFORE adding new ones
        missionList.innerHTML = '';

        // Add top return button
        const topReturnButton = document.createElement('div');
        topReturnButton.className = 'return-to-top';
        topReturnButton.innerHTML = `
           <svg viewBox="0 0 24 24">
                    <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
                </svg>
            Return to Selected Filter
        `;
        topReturnButton.onclick = function() {
            const selectedCard = document.querySelector('.animal-card2.selected');
            if (selectedCard) {
                selectedCard.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        };
        missionList.appendChild(topReturnButton);

// Add search bar
        const searchBarContainer = document.createElement('div');
        searchBarContainer.className = 'search-bar-container';
        const searchBar = document.createElement('input');
        searchBar.type = 'text';
        searchBar.id = 'mission-search';
		searchBar.className = 'search-bar';
        searchBar.placeholder = 'Search missions (type "best" to sort by best available)';
        searchBarContainer.appendChild(searchBar);
        missionList.appendChild(searchBarContainer);
		setTimeout(() => searchBar.focus(), 0);

 // Check if header already exists before adding
        let header = missionList.querySelector('.list-header');
        if (!header) {
            header = document.createElement('div');
            header.className = 'list-header';
            header.innerHTML = `
                <div class="header-objectives">Objectives</div>
                <div class="header-reward">Reward</div>
                <div class="header-status">Status</div>
            `;
            missionList.appendChild(header);
        }


        // Get reserve name
        const reserveName = clickedCard.querySelector('h3').textContent;
        
        // Get mission packs and their missions
        const missionPacks = [
		     'advanced-firearms-missions',
'aimpoint-missions'
];
        
        missionPacks.forEach(packId => {
            const pack = document.getElementById(packId);
            if (pack) {
                const missions = Array.from(pack.querySelectorAll('.mission-item'));
                
                missions.forEach((mission) => {
                    const reserveLocation = mission.querySelector('.reserve-locations');
                    if (reserveLocation && reserveLocation.textContent.includes(reserveName)) {
                        if (!mission.classList.contains('completed')) {
                            const clone = mission.cloneNode(true);
                            
                            // Find the original mission's position within its pack
                            const packMissions = Array.from(pack.querySelectorAll('.mission-item'));
                            const originalPosition = packMissions.indexOf(mission);
                            
                            // Set counter-reset to match original mission number
                            clone.style.counterReset = `mission-counter ${originalPosition}`;
                            
                            const originalCheckbox = mission.querySelector('.mission-checkbox');
                            const clonedCheckbox = clone.querySelector('.mission-checkbox');
                            
                            // Sync checkbox state
                            clonedCheckbox.checked = originalCheckbox.checked;
                            
                            // Add click handler to sync both checkboxes
                            clone.addEventListener('click', function(e) {
                                if (!e.target.classList.contains('mission-checkbox')) {
                                    originalCheckbox.closest('.mission-item').click();
                                    clonedCheckbox.checked = originalCheckbox.checked;
                                    clone.classList.toggle('completed', clonedCheckbox.checked);
                                    // Prevent the mission list from collapsing by forcing it to stay displayed
                                    missionList.style.display = "block";
                                }
                            });
                            
                            missionList.appendChild(clone);
                        }
                    }
                });
            }
        });

        // Add bottom return button
        const bottomReturnButton = document.createElement('div');
        bottomReturnButton.className = 'return-to-top';
        bottomReturnButton.innerHTML = `
           <svg viewBox="0 0 24 24">
                    <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
                </svg>
            Return to Selected Filter
        `;
        bottomReturnButton.onclick = function() {
            const selectedCard = document.querySelector('.animal-card2.selected');
            if (selectedCard) {
                selectedCard.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        };
        missionList.appendChild(bottomReturnButton);
		
		        // Add event listener for search bar

	

        if (searchBar) {

	

            searchBar.addEventListener('input', function() {

	

                const searchTerm = searchBar.value.toLowerCase();

	

                const missionItems = missionList.querySelectorAll('.mission-item');

	

                

	

                if (searchTerm === 'best') {

	

                    // Hide all missions first

	

                    missionItems.forEach(mission => {

	

                        mission.style.display = 'none';

	

                        mission.classList.remove('lowest-reward');

	

                    });

	

                    

	

                    // Find and show lowest reward missions from each pack

	

                    const missionPacks = {

	

                        'Advanced Firearms Missions': [],

	

    'Aimpoint Missions': []

	

    };

	

                    

	

                    // Get all original mission packs idiot3

	

                    const originalPacks = [

	

                        'advanced-firearms-missions',
'aimpoint-missions'



	


 ];

	

                    

	

                    // Collect uncompleted missions from original packs

	

                    originalPacks.forEach(packId => {

	

                        const pack = document.getElementById(packId);

	

                        if (pack) {

	

                            const packName = pack.querySelector('.mission-item .mission-pack-name').textContent.trim();

	

                            const uncompletedMissions = Array.from(pack.querySelectorAll('.mission-item:not(.completed)'));

	

                            

	

                            uncompletedMissions.forEach(mission => {

	

                                const reward = parseInt(mission.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));

	

                                missionPacks[packName].push({

	

                                    reward: reward,

	

                                    objectives: mission.querySelector('.mission-objectives').textContent

	

                                });

	

                            });

	

                        }

	

                    });

	

                    

	

                    // Show matching lowest reward missions in current filtered list

	

                    Object.entries(missionPacks).forEach(([packName, missions]) => {

	

                        if (missions.length > 0) {

	

                            const lowestReward = Math.min(...missions.map(m => m.reward));

	

                            missionItems.forEach(mission => {

	

                                const headerText = mission.querySelector('.mission-pack-name').textContent.trim();

	

                                const reward = parseInt(mission.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));

	

                                if (headerText === packName && reward === lowestReward && !mission.classList.contains('completed')) {

	

                                    mission.style.display = '';

	

                                    mission.classList.add('lowest-reward');

	

                                }

	

                            });

	

                        }

	

                    });

	

                } else {

	

                    // Regular search behavior

	

                    missionItems.forEach(mission => {

	

                        mission.classList.remove('lowest-reward');

	

                        const objectives = mission.querySelector('.mission-objectives').textContent.toLowerCase();

	

                        const reserveElem = mission.querySelector('.reserve-locations');

	

                        const reserve = reserveElem ? reserveElem.textContent.toLowerCase() : '';

	

                        const reward = mission.querySelector('.gm-reward').textContent.toLowerCase();

	

                        

	

                        if (objectives.includes(searchTerm) ||

	

                            reserve.includes(searchTerm) ||

	

                            reward.includes(searchTerm)) {

	

                            mission.style.display = '';

	

                        } else {

	

                            mission.style.display = 'none';

	

                        }

	

                    });

	

                }

	

            });

	

        }

	

         
		
        
        // Show the mission list
        missionList.style.display = "block";
        
        // Scroll to mission list
        missionList.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
        
        if (reserveId !== 'best-available-missions') {
            highlightLowestRewardMissions(missionList);
        }
    }
}

function toggleComplete(element) {
    const checkbox = element.classList?.contains('mission-item') ? 
        element.querySelector('.mission-checkbox') : 
        element;
    
    checkbox.checked = !checkbox.checked;
    
    const missionItem = checkbox.closest('.mission-item');
    if (checkbox.checked) {
        missionItem.classList.add('completed');
        
        // Only hide completed missions in filtered views
        const filteredList = missionItem.closest('.mission-list');
        if (filteredList && (
			            filteredList.id === 'best-available-missions' || 
                        filteredList.id === 'whitehart-missions' || 
                        filteredList.id === 'loggers-missions' ||
						filteredList.id === 'settler-missions' ||						
						filteredList.id === 'redfeather-missions' ||
						filteredList.id === 'hirschfelden-missions' ||
						filteredList.id === 'hemmeldal-missions' ||
						filteredList.id === 'rougarou-missions' ||
						filteredList.id === 'val-missions' ||
						filteredList.id === 'bushrangers-missions' ||
						filteredList.id === 'whiterime-missions' ||
						filteredList.id === 'timbergold-missions' ||
						filteredList.id === 'piccabeen-missions' 
			
			

			
			
			
			
        )) {
            // Apply animation and hide only in filtered views
            missionItem.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            missionItem.style.opacity = '0';
            missionItem.style.transform = 'translateX(-100%)';
            
            setTimeout(() => {
                missionItem.style.display = 'none';
            }, 300);
        }
    } else {
        missionItem.classList.remove('completed');
        missionItem.style.opacity = '1';
        missionItem.style.transform = 'translateX(0)';
        missionItem.style.display = '';
    }
    
    // Get the mission list ID and update it
    const missionList = missionItem.closest('.mission-list');
    if (missionList) {
        const listId = missionList.id;
        
        if (listId === 'best-available-missions') {
            updateBestAvailableMissions(missionList);
        } else if (listId === 'whitehart-missions' || listId === 'Loggers-missions') {
            // Force display block to keep filtered list visible
            missionList.style.display = "block";
            toggleFilteredMissions(listId, true);
            missionList.style.display = "block";
        }
        
        // Update lowest reward highlighting
        highlightLowestRewardMissions(missionList);
        
        // Update mission counter
        updateMissionCounter(listId);
    }

    // Update all other instances of this mission in other lists
    const missionObjectives = missionItem.querySelector('.mission-objectives').textContent;
    const allMissionLists = document.querySelectorAll('.mission-list');
    allMissionLists.forEach(list => {
        if (list !== missionList) {
            const matchingMissions = Array.from(list.querySelectorAll('.mission-item')).filter(item => 
                item.querySelector('.mission-objectives').textContent === missionObjectives
            );
            
            matchingMissions.forEach(matchingMission => {
                const matchingCheckbox = matchingMission.querySelector('.mission-checkbox');
                if (matchingCheckbox.checked !== checkbox.checked) {
                    matchingCheckbox.checked = checkbox.checked;
                    matchingMission.classList.toggle('completed', checkbox.checked);
                    
                    // Only hide in filtered views dummy
                    if (list.id === 'best-available-missions' || 
                        list.id === 'whitehart-missions' || 
                        list.id === 'loggers-missions' ||
						list.id === 'settler-missions' ||						
						list.id === 'redfeather-missions' ||
						list.id === 'hirschfelden-missions' ||
						list.id === 'hemmeldal-missions' ||
						list.id === 'rougarou-missions' ||
						list.id === 'val-missions' ||
						list.id === 'bushrangers-missions' ||
						list.id === 'whiterime-missions' ||
						list.id === 'timbergold-missions' ||
						list.id === 'piccabeen-missions' 
						
						
						
						) {
                        if (checkbox.checked) {
                            matchingMission.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                            matchingMission.style.opacity = '0';
                            matchingMission.style.transform = 'translateX(-100%)';
                            setTimeout(() => {
                                matchingMission.style.display = 'none';
                            }, 300);
                        
						}
                    }
                }
            });
            
            if (list.id === 'best-available-missions') {
                updateBestAvailableMissions(list);
            } else {
                highlightLowestRewardMissions(list);
            }
        }
    });
	
}
function highlightLowestRewardMissions(missionList) {
    // Get all mission packs from the original mission lists, not the filtered view
    const missionPacks = {};
    
    // First collect all missions from original mission lists
    [     'advanced-firearms-missions',
'aimpoint-missions'
].forEach(packId => {
        const pack = document.getElementById(packId);
        if (pack) {
            const packName = pack.querySelector('.mission-item .mission-pack-name').textContent.trim();
            missionPacks[packName] = [];
            
            // Only collect uncompleted missions
            pack.querySelectorAll('.mission-item:not(.completed)').forEach(mission => {
                const reward = parseInt(mission.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));
                const objectives = mission.querySelector('.mission-objectives').textContent;
                missionPacks[packName].push({ 
                    reward: reward,
                    objectives: objectives,
                    element: mission 
                });
            });
        }
    });

    // Remove existing lowest-reward class from all missions in the filtered view
    missionList.querySelectorAll('.mission-item').forEach(mission => {
        mission.classList.remove('lowest-reward');
    });

    // For each pack, find lowest reward and highlight matching missions in filtered view
    Object.entries(missionPacks).forEach(([packName, missions]) => {
        if (missions.length > 0) {
            const lowestReward = Math.min(...missions.map(m => m.reward));
            const lowestMissionObjectives = missions.find(m => m.reward === lowestReward).objectives;
            
            // Find and highlight matching mission in filtered view
            missionList.querySelectorAll('.mission-item:not(.completed)').forEach(mission => {
                if (mission.querySelector('.mission-objectives').textContent === lowestMissionObjectives) {
                    mission.classList.add('lowest-reward');
                }
            });
        }
    });
	    const searchBar = document.querySelector('.search-bar'); // Update selector based on your actual search bar
    if (searchBar) {
       setTimeout(() => searchBar.focus(), 0);
    }

}
function updateMissionCounter(missionId) {
    const missionList = document.getElementById(missionId);
    const total = missionList.querySelectorAll('.mission-item').length;
    const completed = missionList.querySelectorAll('.mission-item.completed').length;
    
    // Calculate total and claimed rewards
    let totalReward = 0;
    let claimedReward = 0;
    missionList.querySelectorAll('.mission-item').forEach(item => {
        const rewardText = item.querySelector('.gm-reward').textContent;
        const reward = parseInt(rewardText.replace(/[^0-9]/g, ''));
        totalReward += reward;
        if (item.classList.contains('completed')) {
            claimedReward += reward;
        }
    });
    
    // Find the corresponding animal card and update its counters
    const cardId = missionId.replace('-missions', '');
    const card = document.querySelector(`.animal-card[onclick*="${missionId}"], .animal-card2[onclick*="${missionId}"]`);
    
    // Only update stats if card exists
    if (card) {
        // Create or get stats container  
        let statsContainer = card.querySelector('.mission-stats');
        if (!statsContainer) {
            statsContainer = document.createElement('div');
            statsContainer.className = 'mission-stats';
            card.appendChild(statsContainer);
        }
        
        // Update mission counter
        let missionCounter = statsContainer.querySelector('.mission-counter');
        if (!missionCounter) {
            missionCounter = document.createElement('div');
            missionCounter.className = 'mission-counter';
            statsContainer.appendChild(missionCounter);
        }
        missionCounter.textContent = `${completed} / ${total} Missions Completed`;
        
        // Update reward counter
        let rewardCounter = statsContainer.querySelector('.reward-counter');
        if (!rewardCounter) {
            rewardCounter = document.createElement('div');
            rewardCounter.className = 'reward-counter';
            statsContainer.appendChild(rewardCounter);
        }
        rewardCounter.textContent = `${claimedReward.toLocaleString()} / ${totalReward.toLocaleString()}gm$`;
    }
}

function clearSearchTerm() {
    const searchBar = document.getElementById('mission-search');
    if (!searchBar) return; // Add guard clause if search bar not found
    
    searchBar.value = ''; // Clear the search bar
    currentSearchTerm = ''; // Reset the stored search term

    // Reset mission list visibility
    const allMissions = document.querySelectorAll('#mission-filters .mission-list .mission-item');
    allMissions.forEach(mission => {
        mission.style.display = ''; // Show all missions again
    });
}

// Add click handlers to mission items
document.addEventListener('DOMContentLoaded', function() {
    const missionItems = document.querySelectorAll('.mission-item');
    missionItems.forEach(item => {
        item.addEventListener('click', function(e) {
            if (!e.target.classList.contains('mission-checkbox')) {
                toggleComplete(item);
            }
        });
    });

    // Initialize counters for all mission lists
    [
	
	     'advanced-firearms-missions',
'aimpoint-missions'
].forEach(missionId => {
        updateMissionCounter(missionId);
    });
	
	    // Reset all checkboxes on page load

	

    const allCheckboxes = document.querySelectorAll('.mission-checkbox');

	

    allCheckboxes.forEach(checkbox => {

	

        checkbox.checked = false;

	

        checkbox.closest('.mission-item')?.classList.remove('completed');

	

    }); 
	

    // Add handler for the paste textarea
    const dataPasteArea = document.querySelector('.data-paste');
    if (dataPasteArea) {
        dataPasteArea.addEventListener('paste', (e) => {
            // Short delay to allow paste to complete
            setTimeout(() => {
                processPastedData(dataPasteArea.value);
            }, 100);
        });
    }
    
    // Add initial highlighting of lowest reward missions in original mission packs
    const missionPacks = [
           'advanced-firearms-missions',
'aimpoint-missions'
];

    missionPacks.forEach(packId => {
      const pack = document.getElementById(packId);
      if (pack) {
        // Find lowest uncompleted reward in pack
        const uncompletedMissions = Array.from(pack.querySelectorAll('.mission-item:not(.completed)'));
        if (uncompletedMissions.length > 0) {
          const rewards = uncompletedMissions.map(mission => 
            parseInt(mission.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''))
          );
          const lowestReward = Math.min(...rewards);
          
          // Add lowest-reward class to matching missions
          uncompletedMissions.forEach(mission => {
            const reward = parseInt(mission.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));
            if (reward === lowestReward) {
              mission.classList.add('lowest-reward');
            }
          });
        }
      }
    });
});

function loadMissionData() {
    // Reset all missions first
    const allCheckboxes = document.querySelectorAll('.mission-checkbox');
    allCheckboxes.forEach(checkbox => {
        if (checkbox.checked) {
            toggleComplete(checkbox);
        }
    });
    const dataPasteArea = document.querySelector('.data-paste');
    const text = dataPasteArea.value;
    
    if (!text) {
        alert('Please paste mission data first');
        return;
    }



    // Create a mapping of mission pack names to their IDs
    const missionPacks = {
 'Advanced Firearms Missions': 'advanced-firearms-missions',
'Aimpoint Missions': 'aimpoint-missions',

};

    // Process the text line by line
    const lines = text.split('\n');
    let currentPack = null;
    
    for (let i = 0; i < lines.length; i++) {
        const line = lines[i].trim();
        
        // Check if line contains a mission pack name
        for (const [packName, packId] of Object.entries(missionPacks)) {
            if (line === packName) {
                currentPack = packId;
                // Look at next line for progress
                if (i + 1 < lines.length) {
                    const progressLine = lines[i + 1].trim();
                    const progressMatch = progressLine.match(/Progress:\s*(\d+)\s*\/\s*(\d+)/);
                    if (progressMatch) {
                        const completedCount = parseInt(progressMatch[1]);
                        // Get the mission list for this pack
                        const missionList = document.getElementById(currentPack);
                        if (missionList) {
                            const missionItems = missionList.querySelectorAll('.mission-item');
                            // Check boxes up to the completed count
                            missionItems.forEach((item, index) => {
                                if (index < completedCount) {
                                    const checkbox = item.querySelector('.mission-checkbox');
                                    if (!checkbox.checked) {
                                        toggleComplete(item);
                                    }
                                }
                            });
                        }
                    }
                }
                break;
            }
        }
    }

    // Switch to Mission Manager tab
    openTab('mission-manager');

    // Show success message
    alert('Mission progress loaded successfully!');
}

function processPastedData(text) {
    // Remove automatic processing - now handled by Load button
}

function returnToSelected() {
    // Find the currently selected card
    const selectedCard = document.querySelector('.animal-card.selected');
    if (selectedCard) {
        // Scroll to the selected card with smooth behavior
        selectedCard.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
        });
    }
}

function openTab(tabName) {
    // Hide all tab contents
    const tabContents = document.getElementsByClassName('tab-content');
    for (let content of tabContents) {
        content.classList.remove('active');
    }
    
    // Remove active class from all tabs
    const tabs = document.getElementsByClassName('tab');
    for (let tab of tabs) {
        tab.classList.remove('active');
    }
    
    // Show the selected tab content
    document.getElementById(tabName).classList.add('active');
    
    // Add active class to the clicked tab
    event.currentTarget.classList.add('active');


// Setup the search functionality
let currentSearchTerm = ''; // Global variable to store search term
    if (tabName === 'mission-manager') { // Replace 'search-tab' with the ID of the tab containing your search input
        const searchInput = document.querySelector('.search-input2');
        if (searchInput) {
            searchInput.focus();
        }
    }
}
function setupSearch() {
    const searchBar = document.getElementById('mission-search');
    if (searchBar) {
        // Change placeholder text
        searchBar.placeholder = "Search missions or type 'best' to see lowest rewards...";
        // Function to perform the search
        const performSearch = () => {
            const searchTerm = searchBar.value.toLowerCase();
            currentSearchTerm = searchTerm; // Store the search term
            const allMissions = document.querySelectorAll('#mission-filters .mission-list .mission-item');
            
            if (searchTerm === 'best') {
                // Hide all missions first
                allMissions.forEach(mission => {
                    mission.style.display = 'none';
                });
                
                // Find and show lowest reward missions from each pack
                const missionPacks = {
    'Advanced Firearms Missions': [],
    'Aimpoint Missions': []
    
                };
                
                // Collect uncompleted missions by pack
                allMissions.forEach(mission => {
                    if (!mission.classList.contains('completed')) {
                        const packName = mission.querySelector('.mission-pack-name').textContent.trim();
                        const reward = parseInt(mission.querySelector('.gm-reward').textContent.replace(/[^0-9]/g, ''));
                        missionPacks[packName].push({mission, reward});
                    }
                });
                
                // Show lowest reward mission from each pack
                Object.values(missionPacks).forEach(missions => {
                    if (missions.length > 0) {
                        const lowestReward = Math.min(...missions.map(m => m.reward));
                        missions.forEach(({mission, reward}) => {
                            if (reward === lowestReward) {
                                mission.style.display = '';
                            }
                        });
                    }
                });
            } else {
                // Regular search behavior
                allMissions.forEach(mission => {
                    const objectives = mission.querySelector('.mission-objectives').textContent.toLowerCase();
                    const reserve = mission.querySelector('.reserve-locations').textContent.toLowerCase();
                    const reward = mission.querySelector('.gm-reward').textContent.toLowerCase();
                    
                    if (objectives.includes(searchTerm) || 
                        reserve.includes(searchTerm) || 
                        reward.includes(searchTerm)) {
                        mission.style.display = '';
                    } else {
                        mission.style.display = 'none';
                    }
                });
            }
        };

        // Add event listeners for search input
        searchBar.addEventListener('input', performSearch);
    }
}

// Function to clear the search term when required (on animal card click or reset)
function clearSearchTerm() {
    const searchBar = document.getElementById('mission-search');
    if (!searchBar) return; // Add guard clause if search bar not found
    
    searchBar.value = ''; // Clear the search bar
    currentSearchTerm = ''; // Reset the stored search term

    // Reset mission list visibility
    const allMissions = document.querySelectorAll('#mission-filters .mission-list .mission-item');
    allMissions.forEach(mission => {
        mission.style.display = ''; // Show all missions again
    });
}

// If you want to clear the search term when clicking on an animal card:
const animalCards = document.querySelectorAll('.animal-card2');
animalCards.forEach(card => {
    card.addEventListener('click', () => {
        clearSearchTerm(); // Clears the search bar and resets the list
    });
 });



// Add search setup to DOMContentLoaded event listener
document.addEventListener('DOMContentLoaded', function() {
    // ... existing code ...
    
    // Initialize search functionality
    setupSearch();
});

// Function to add matching animal thumbnails to mission name headers
function addThumbnailsToMissionHeaders() {
    const animalCards = document.querySelectorAll('.animal-card'); // Get all animal cards
    const missionLists = document.querySelectorAll('.mission-list .mission-item'); // Get all mission items

    // Loop through each mission item
    missionLists.forEach(mission => {
        // Find the mission name header in the mission item
        const missionPackName = mission.querySelector('.mission-pack-name');

        if (missionPackName) {
            const missionName = missionPackName.textContent.trim();

            // Loop through each animal card to find the matching mission
            animalCards.forEach(animalCard => {
                const animalName = animalCard.querySelector('h3').textContent.trim();

                // If the mission name matches the animal card name, add the thumbnail
                if (missionName === animalName) {
                    const animalThumbnail = animalCard.querySelector('.animal-thumbnail').cloneNode(true);

                    // Create a wrapper div for the thumbnail
                    const thumbnailWrapper = document.createElement('div');
                    thumbnailWrapper.className = 'mission-thumbnail-wrapper';
                    thumbnailWrapper.appendChild(animalThumbnail);

                    // Ensure the mission header is in a flex container
                    const missionHeader = mission.querySelector('.mission-header');
                    if (!missionHeader) {
                        // If the mission item doesn't already have a flex container, create one
                        const headerWrapper = document.createElement('div');
                        headerWrapper.classList.add('mission-header');
                        missionPackName.parentNode.insertBefore(headerWrapper, missionPackName);
                        headerWrapper.appendChild(thumbnailWrapper);
                        headerWrapper.appendChild(missionPackName);
                    } else {
                        // If the mission item already has a flex container, just append the thumbnail
                        missionHeader.insertBefore(thumbnailWrapper, missionPackName);
                    }
                }
            });
        }
    });
}

// Run the function after the DOM is fully loaded
document.addEventListener('DOMContentLoaded', function() {
    addThumbnailsToMissionHeaders();
});



function initializeSearch() {
    const searchInput = document.querySelector('.search-input2');
    const searchResults = document.querySelector('.search-result2s2');
    const missionPacks = [
        'Advanced Firearms Missions',
    'Aimpoint Missions'
    
    ];
    
    let selectedIndex = -1;

    searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase();
        const filteredPacks = missionPacks.filter(pack => 
            pack.toLowerCase().includes(query)
        );
        
        displayResults(filteredPacks);
    });

    searchInput.addEventListener('keydown', function(e) {
        const results = searchResults.querySelectorAll('.search-result2');
        
        if (e.key === 'ArrowDown') {
            e.preventDefault();
            selectedIndex = Math.min(selectedIndex + 1, results.length - 1);
            updateSelection(results);
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            selectedIndex = Math.max(selectedIndex - 1, 0);
            updateSelection(results);
        } else if (e.key === 'Enter' && selectedIndex >= 0) {
            e.preventDefault();
            selectMissionPack(results[selectedIndex].textContent);
        }
    });

    searchInput.addEventListener('focus', function() {
        if (this.value) {
            displayResults(missionPacks.filter(pack => 
                pack.toLowerCase().includes(this.value.toLowerCase())
            ));
        }
    });

    // Hide results when clicking outside
    document.addEventListener('click', function(e) {
        if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
            searchResults.style.display = 'none';
            selectedIndex = -1;
        }
    });
	
    // Automatically focus the input element
    searchInput.focus();

	
	document.addEventListener('DOMContentLoaded', function() {
    initializeSearch();
});

function displayResults(results) {
        if (results.length === 0 || !searchInput.value) {
            searchResults.style.display = 'none';
            return;
        }

        searchResults.innerHTML = '';
        results.forEach(result => {
            const div = document.createElement('div');
            div.className = 'search-result2';
            
            // Add thumbnail image based on pack name
            const img = document.createElement('img');
            switch(result) {
                case 'Advanced Firearms Missions':
    img.src = "https://i.postimg.cc/vTDvyj6P/iSr91k-F.jpg";
    break;
case 'Aimpoint Missions':
    img.src = "https://i.postimg.cc/fbwfQ0KL/tenpoint.png";
    break;

            }
            img.alt = result;
            div.appendChild(img);
            
            const text = document.createTextNode(result);
            div.appendChild(text);
            div.onclick = () => selectMissionPack(result);
            searchResults.appendChild(div);
        });
        
        searchResults.style.display = 'block';
        selectedIndex = -1;
    }

    function updateSelection(results) {
        results.forEach((result, index) => {
            result.classList.toggle('selected', index === selectedIndex);
        });
    }

    function selectMissionPack(packName) {
        // Convert pack name to element id
        const missionId = packName.toLowerCase().replace(/\s+/g, '-');
        
        // Find and click the corresponding card
        const cards = document.querySelectorAll('.animal-card');
        cards.forEach(card => {
            if (card.querySelector('h3').textContent === packName) {
                // Clear search
                searchInput.value = '';
                searchResults.style.display = 'none';
                
                // Click the card to expand missions
                card.click();
                
                // Scroll to card
                 // Scroll to card AND mission list
                const missionList = document.getElementById(packName.toLowerCase().replace(/\s+/g, '-') + '-missions');
                if (missionList) {
                    missionList.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start' 
                    });
                }
                
                // Highlight card
                cards.forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
            }
        });
    }
}

document.addEventListener('DOMContentLoaded', function() {
    initializeSearch();
});

</script>
</body>
</html>	
